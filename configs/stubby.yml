# AI-Bastion — Stubby DNS-over-TLS Configuration
# Encrypts all DNS queries to prevent DNS exfiltration and sniffing.
# Stubby license: BSD-3-Clause (getdns project)
#
# Providers: Cloudflare (privacy-first) + Quad9 (malware blocking)

resolution_type: GETDNS_RESOLUTION_STUB
dns_transport_list:
  - GETDNS_TRANSPORT_TLS
tls_authentication: GETDNS_AUTHENTICATION_REQUIRED
tls_query_padding_blocksize: 128
round_robin_upstreams: 1
idle_timeout: 10000
listen_addresses:
  - 127.0.0.1@5353
upstream_recursive_servers:
  # Cloudflare — privacy-focused, no logging
  - address_data: 1.1.1.1
    tls_auth_name: "cloudflare-dns.com"
  - address_data: 1.0.0.1
    tls_auth_name: "cloudflare-dns.com"
  # Quad9 — blocks known malicious domains
  - address_data: 9.9.9.9
    tls_auth_name: "dns.quad9.net"
  - address_data: 149.112.112.112
    tls_auth_name: "dns.quad9.net"
